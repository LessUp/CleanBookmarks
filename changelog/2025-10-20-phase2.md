# Phase 2 变更记录 (2025-10-20)

- 导出层（`src/placeholder_modules.py`）：
  - HTML/Markdown/XML/OPML 导出均跳过空 `subject` 与空 `resource_type` 目录；
  - JSON 导出也剔除空分类与空子类（`_prune_empty`）。
- 规则引擎（`src/rule_engine.py`）：
  - 为分类结果新增 `facets.resource_type_hint`，依据 `content_type`、域名与 URL 关键词推断。
- 分类融合（`src/ai_classifier.py`）：
  - `ClassificationResult` 新增 `facets` 字段；
  - `_ensemble_classification()` 合并各方法提供的分面信息（先到先得、不覆盖）。
- 组织逻辑（`src/bookmark_processor.py`）：
  - 缓存并透传 `facets`；
  - `_organize_bookmarks()` 优先使用 `resource_type_hint`，再回退至子类或派生类型；
  - 保持 `subject -> resource_type` 两级输出。
- 设计文档：新增 `docs/DESIGN.md`，说明架构、受控词表、分面、组织与导出设计，便于开源共享。

兼容性：
- 未配置 LLM 或规则不足时，流程保持稳定；
- 旧分类名与子类通过标准化层与派生逻辑自动兼容；
- 导出器接口不变，结果更干净（无空目录）。
